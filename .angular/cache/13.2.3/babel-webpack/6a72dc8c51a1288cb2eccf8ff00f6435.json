{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { HttpEventType, HttpResponse } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/service/teacher-auth.service\";\nimport * as i3 from \"src/app/service/global.service\";\nimport * as i4 from \"@angular/material/snack-bar\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"@angular/material/form-field\";\nimport * as i8 from \"@angular/material/input\"; // import { AutoLogoutService } from 'src/app/service/auto-logout-service';\n\nexport let ProfileComponent = /*#__PURE__*/(() => {\n  class ProfileComponent {\n    constructor(router, route, teacherService, global, _snackBar) {\n      // private autoLogoutService: AutoLogoutService) {\n      this.router = router;\n      this.route = route;\n      this.teacherService = teacherService;\n      this.global = global;\n      this._snackBar = _snackBar;\n      this.username = localStorage.getItem('name');\n      this.selectedFiles = null;\n      this.currentFile = null;\n      this.progress = 0;\n      this.message = '';\n      this.isDisabled = true; // image = 'http://localhost:5000/api/image/files/' + localStorage.getItem('id')\n\n      this.updateForm = new FormGroup({\n        name: new FormControl('', [Validators.required]),\n        email: new FormControl({\n          value: '',\n          disabled: this.isDisabled\n        }, [Validators.required])\n      }); // localStorage.setItem('lastAction', Date.now().toString());\n\n      this.teacherService.getUserById().subscribe(res => {\n        this.user = res;\n        this.updateForm.patchValue({\n          name: this.user.data.name,\n          email: this.user.data.email\n        });\n      });\n    }\n\n    ngOnInit() {\n      localStorage.setItem('lastAction', Date.now().toString()); // this.getImage()\n\n      this.fileInfos = this.teacherService.getAllFiles();\n    }\n\n    getImage() {\n      this.teacherService.getFilesByName().subscribe(res => {\n        // debugger\n        const file = new Blob([res.blob]);\n        this.fileInfos = URL.createObjectURL(file); // debugger\n      });\n    }\n\n    onLogout() {\n      this.teacherService.onLogout(); // this.router.navigate([\"/authenticate/login\"]);\n    }\n\n    openMenu() {\n      var element = document.getElementById(\"menu3\");\n      element === null || element === void 0 ? void 0 : element.classList.toggle(\"showMenu1\");\n    }\n\n    deleteUser() {\n      this.teacherService.deleteUser().subscribe(res => {\n        localStorage.removeItem('name');\n        localStorage.removeItem('email');\n\n        this._snackBar.open(\" You account has been deleted\", \"Ok\", {\n          duration: 5000,\n          panelClass: ['blue-snackbar']\n        });\n\n        localStorage.removeItem(\"id\");\n        localStorage.removeItem(\"token\");\n        localStorage.setItem(\"isLoggedIn\", \"false\");\n        this.router.navigate([\"/authenticate/login\"]);\n      }, err => {\n        console.log(err);\n\n        this._snackBar.open(\"Failed to delete account\", \"Ok\", {\n          duration: 5000,\n          panelClass: ['blue-snackbar']\n        });\n      });\n    }\n\n    updateUser() {\n      let body = this.updateForm.value;\n      this.teacherService.updateUser(body).subscribe(res => {\n        this.updatedUser = res;\n        localStorage.setItem('name', this.updatedUser.data.name);\n        this.updateForm.patchValue({\n          name: this.updatedUser.data.name // email: this.updatedUser.data.email,\n\n        });\n        this.user = this.updateForm.value;\n        console.log(this.user);\n\n        this._snackBar.open(\" You profile has been updated\", \"Ok\", {\n          duration: 5000,\n          panelClass: ['blue-snackbar']\n        });\n\n        window.location.reload();\n      }, err => {\n        this._snackBar.open(\"Failed to update account\", \"Ok\", {\n          duration: 5000,\n          panelClass: ['blue-snackbar']\n        });\n\n        this.router.navigate(['/user/profile']);\n      });\n    } // processFile(event: any) {\n    // \tlet reader = new FileReader();\n    // \treader.onload = function () {\n    // \t\tlet output: any = document.getElementById('blah');\n    // \t\toutput.src = reader.result;\n    // \t}\n    // \tif (event.target.files[0]) {\n    // \t\treader.readAsDataURL(event.target.files[0]);\n    // \t}\n    // }\n\n\n    selectFile(event) {\n      this.selectedFiles = event.target.files;\n    }\n\n    upload() {\n      this.progress = 0;\n      this.currentFile = this.selectedFiles.item(0);\n      this.teacherService.upload(this.currentFile).subscribe(res => {\n        this.ngOnInit();\n\n        if (res.type === HttpEventType.UploadProgress) {\n          window.location.reload();\n\n          if (res.total) {\n            const total = res.total;\n            this.progress = Math.round(100 * res.loaded / total);\n          }\n        } else if (res instanceof HttpResponse) {\n          this.message = res.body.message;\n          this.fileInfos = this.teacherService.getAllFiles();\n        }\n      }, err => {\n        this.progress = 0;\n        this.message = 'Could not upload the file!';\n        this.currentFile = undefined;\n      });\n      this.selectedFiles = undefined;\n    }\n\n  }\n\n  ProfileComponent.ɵfac = function ProfileComponent_Factory(t) {\n    return new (t || ProfileComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.TeacherAuthService), i0.ɵɵdirectiveInject(i3.GlobalService), i0.ɵɵdirectiveInject(i4.MatSnackBar));\n  };\n\n  ProfileComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProfileComponent,\n    selectors: [[\"app-profile\"]],\n    decls: 51,\n    vars: 2,\n    consts: [[1, \"main-content\"], [1, \"container\"], [1, \"row\"], [1, \"col-md-8\"], [1, \"card\"], [1, \"card-header\", \"card-header-danger\"], [1, \"card-title\"], [\"mat-stroked-button\", \"\", \"type\", \"button\", \"routerLink\", \"/authenticate/login\", 1, \"button\", 2, \"color\", \"black\", 3, \"click\"], [1, \"card-body\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"col-md-5\"], [1, \"example-full-width\"], [\"matInput\", \"\", \"placeholder\", \"Company Seeds\", \"disabled\", \"\"], [1, \"col-md-3\"], [\"matInput\", \"\", \"formControlName\", \"name\", \"placeholder\", \"Full name\", \"type\", \"text\", \"name\", \"name\", \"id\", \"name\"], [1, \"col-md-4\"], [\"matInput\", \"\", \"formControlName\", \"email\", \"placeholder\", \"Email address\", \"type\", \"email\"], [\"mat-stroked-button\", \"\", \"type\", \"submit\", 1, \"button\"], [1, \"clearfix\"], [1, \"buttonDiv\"], [\"mat-stroked-button\", \"\", \"type\", \"submit\", 1, \"button\", 3, \"click\"], [\"mat-stroked-button\", \"\", \"type\", \"submit\", \"routerLink\", \"/authenticate/changePassword\", 1, \"button\"], [1, \"card\", \"card-profile\"], [1, \"card-avatar\"], [\"src\", \"assets/avatar.png\"], [1, \"card-category\", \"text-gray\"], [1, \"card-description\"], [1, \"main-button\"], [\"mat-stroked-button\", \"\", \"type\", \"button\", \"routerLink\", \"/user/add\", 1, \"button\"]],\n    template: function ProfileComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelementStart(5, \"div\", 5);\n        i0.ɵɵelementStart(6, \"h4\", 6);\n        i0.ɵɵtext(7, \"Edit Profile\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function ProfileComponent_Template_button_click_8_listener() {\n          return ctx.onLogout();\n        });\n        i0.ɵɵtext(9, \"Logout\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 8);\n        i0.ɵɵelementStart(11, \"form\", 9);\n        i0.ɵɵlistener(\"ngSubmit\", function ProfileComponent_Template_form_ngSubmit_11_listener() {\n          return ctx.updateUser();\n        });\n        i0.ɵɵelementStart(12, \"div\", 2);\n        i0.ɵɵelementStart(13, \"div\", 10);\n        i0.ɵɵelementStart(14, \"mat-form-field\", 11);\n        i0.ɵɵelement(15, \"input\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"div\", 13);\n        i0.ɵɵelementStart(17, \"mat-form-field\", 11);\n        i0.ɵɵelement(18, \"input\", 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"div\", 15);\n        i0.ɵɵelementStart(20, \"mat-form-field\", 11);\n        i0.ɵɵelement(21, \"input\", 16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"button\", 17);\n        i0.ɵɵtext(23, \"Update Profile\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(24, \"hr\");\n        i0.ɵɵelement(25, \"div\", 18);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"div\", 19);\n        i0.ɵɵelementStart(27, \"button\", 20);\n        i0.ɵɵlistener(\"click\", function ProfileComponent_Template_button_click_27_listener() {\n          return ctx.deleteUser();\n        });\n        i0.ɵɵtext(28, \"Delete account\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"button\", 21);\n        i0.ɵɵtext(30, \"Change Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(31, \"br\");\n        i0.ɵɵelementStart(32, \"div\", 15);\n        i0.ɵɵelementStart(33, \"div\", 22);\n        i0.ɵɵelementStart(34, \"div\", 23);\n        i0.ɵɵelement(35, \"img\", 24);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"div\", 8);\n        i0.ɵɵelementStart(37, \"h6\", 25);\n        i0.ɵɵtext(38, \"Welcome to Seeds\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"h4\");\n        i0.ɵɵtext(40);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(41, \"p\", 26);\n        i0.ɵɵtext(42, \" Here, you can edit your profile, update your information, and create new learning content for students here. Please click the button below to start the content creation process. Use the fields on the left, to edit your information. If you have any questions please check the FAQ section, and don\\u2019t hesitate to contact us for more help. \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(43, \"div\", 27);\n        i0.ɵɵelementStart(44, \"button\", 28);\n        i0.ɵɵtext(45, \"Add new Topic\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(46, \"br\");\n        i0.ɵɵelement(47, \"br\");\n        i0.ɵɵelement(48, \"br\");\n        i0.ɵɵelement(49, \"br\");\n        i0.ɵɵelement(50, \"br\");\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"formGroup\", ctx.updateForm);\n        i0.ɵɵadvance(29);\n        i0.ɵɵtextInterpolate1(\"Hello \", ctx.username, \"\");\n      }\n    },\n    directives: [i5.MatButton, i1.RouterLink, i6.ɵNgNoValidate, i6.NgControlStatusGroup, i6.FormGroupDirective, i7.MatFormField, i8.MatInput, i6.DefaultValueAccessor, i6.NgControlStatus, i6.FormControlName],\n    styles: [\".circle[_ngcontent-%COMP%]{background-color:#00f;width:100px;height:100px;border-radius:50px;text-align:center}p[_ngcontent-%COMP%]{font-family:Lato}.hoverable[_ngcontent-%COMP%]{position:relative;display:block;cursor:pointer;height:200px;border-radius:50%}.hoverable[_ngcontent-%COMP%]   .hover-text[_ngcontent-%COMP%]{position:absolute;display:none;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2}.hoverable[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{position:absolute;display:none;top:0;left:0;bottom:0;right:0;background-color:#ffffff80;pointer-events:none;border-radius:50%;z-index:1}.hoverable[_ngcontent-%COMP%]:hover   .hover-text[_ngcontent-%COMP%], .hoverable[_ngcontent-%COMP%]:hover   .background[_ngcontent-%COMP%]{display:block}#fileInput[_ngcontent-%COMP%]{display:none}\"]\n  });\n  return ProfileComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}